<!DOCTYPE html>
<script src="./dist/echarts.min410rc2.js"></script>
<script src="./dist/echarts-gl11.min.js"></script>
<script src="./dist/simplex-noise.js"></script>
<script src="./dist/turf.min.js" charset="utf-8"></script>
<script src="https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.js"></script>
<link href="https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.1/mapbox-gl.css" rel="stylesheet" />
<script type="text/javascript" src="./dist/jquery-3.2.1.min.js"></script>
<script src="map.js"></script>
<link type="text/css" rel="stylesheet" href="./css/pm25-map.css?v=2" />
<link type="text/css" rel="stylesheet" href="./dist/jquery.toast.min.css" />

<head>
  <meta charset="utf-8" />
  <!-- 處理畫面有時過度放大的問題 -->
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1"
  />
  <title></title>
</head>

<body scroll="no" style="overflow: hidden">
  <div id="main">
    <div id="map"></div>
  </div>

  <script type="text/javascript">
    //設定數據高度
    let dataHeight = 50;

    //設定站點, type: station, path
    let stations = [
      turf.point([121.161853, 24.055407], { height: dataHeight + 20, type: 'station' }),
      turf.point([121.162561, 24.056401], { height: dataHeight + 20, type: 'station' }),
      turf.point([121.162127, 24.054522], { height: dataHeight + 20, type: 'station' }),
      turf.point([121.160329, 24.052259], { height: dataHeight, type: 'station' }),
      turf.point([121.161263, 24.054432], { height: dataHeight + 100, type: 'station' }),
    ];

    //設定地圖出現時的中心座標點
    let centroidCoord = turf.centroid(turf.featureCollection(stations)).geometry.coordinates;

    //初始化地圖
    init([centroidCoord[1], centroidCoord[0]]);
    loadMap();

    //設定飛行路徑 (每單位分割站點路徑)
    let path = makePath(stations, 0.01, dataHeight);

    //繪製飛行路徑
    drawPoints(path);
  </script>
</body>
